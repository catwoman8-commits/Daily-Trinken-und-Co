<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Health Tracker</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="manifest" href="data:application/json;base64,eyJuYW1lIjoiSGVhbHRoIFRyYWNrZXIiLCJzaG9ydF9uYW1lIjoiSGVhbHRoIiwiZGlzcGxheSI6InN0YW5kYWxvbmUiLCJiYWNrZ3JvdW5kX2NvbG9yIjoiI2ZmZmZmZiIsInRoZW1lX2NvbG9yIjoiIzM0ODBmZiJ9">
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Lucide Icons as SVG components
        const Droplet = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"/>
            </svg>
        );

        const Coffee = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M18 8h1a4 4 0 0 1 0 8h-1"/>
                <path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"/>
                <line x1="6" y1="1" x2="6" y2="4"/>
                <line x1="10" y1="1" x2="10" y2="4"/>
                <line x1="14" y1="1" x2="14" y2="4"/>
            </svg>
        );

        const Calendar = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                <line x1="16" y1="2" x2="16" y2="6"/>
                <line x1="8" y1="2" x2="8" y2="6"/>
                <line x1="3" y1="10" x2="21" y2="10"/>
            </svg>
        );

        const ShoppingCart = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <circle cx="9" cy="21" r="1"/>
                <circle cx="20" cy="21" r="1"/>
                <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
            </svg>
        );

        const Plus = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <line x1="12" y1="5" x2="12" y2="19"/>
                <line x1="5" y1="12" x2="19" y2="12"/>
            </svg>
        );

        const Check = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <polyline points="20 6 9 17 4 12"/>
            </svg>
        );

        const X = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <line x1="18" y1="6" x2="6" y2="18"/>
                <line x1="6" y1="6" x2="18" y2="18"/>
            </svg>
        );

        const Clock = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <circle cx="12" cy="12" r="10"/>
                <polyline points="12 6 12 12 16 14"/>
            </svg>
        );

        function HealthTracker() {
            const [activeTab, setActiveTab] = useState('water');
            const [waterIntake, setWaterIntake] = useState(0);
            const [waterGoal] = useState(2000);
            const [lastWaterTime, setLastWaterTime] = useState(null);
            const [mealPlan, setMealPlan] = useState({});
            const [mealsCompleted, setMealsCompleted] = useState({});
            const [showMealForm, setShowMealForm] = useState(false);
            const [newMeal, setNewMeal] = useState({ day: 'Montag', time: 'Fr√ºhst√ºck', meal: '' });

            const days = ['Montag', 'Dienstag', 'Mittwoch', 'Donnerstag', 'Freitag', 'Samstag', 'Sonntag'];
            const mealTimes = ['Fr√ºhst√ºck', 'Mittagessen', 'Abendessen', 'Snacks'];

            useEffect(() => {
                const interval = setInterval(() => {
                    if (waterIntake < waterGoal) {
                        const now = new Date();
                        const hour = now.getHours();
                        if (hour >= 7 && hour <= 22) {
                            if (!lastWaterTime || (now - lastWaterTime) > 3600000) {
                                showNotification('üíß Zeit Wasser zu trinken!', 'Bleib hydriert - trink ein Glas Wasser');
                            }
                        }
                    }
                }, 1800000);

                return () => clearInterval(interval);
            }, [waterIntake, waterGoal, lastWaterTime]);

            useEffect(() => {
                const checkMealTime = () => {
                    const now = new Date();
                    const hour = now.getHours();
                    const day = days[now.getDay() === 0 ? 6 : now.getDay() - 1];
                    const today = new Date().toDateString();

                    let mealTime = null;
                    if (hour === 8) mealTime = 'Fr√ºhst√ºck';
                    else if (hour === 12) mealTime = 'Mittagessen';
                    else if (hour === 18) mealTime = 'Abendessen';

                    if (mealTime && !mealsCompleted[`${today}-${mealTime}`]) {
                        const plannedMeal = mealPlan[`${day}-${mealTime}`];
                        if (plannedMeal) {
                            showNotification(`üçΩÔ∏è ${mealTime} Zeit!`, `Heute: ${plannedMeal}`);
                        } else {
                            showNotification(`üçΩÔ∏è ${mealTime} Zeit!`, `Vergiss nicht dein ${mealTime}`);
                        }
                    }
                };

                const interval = setInterval(checkMealTime, 60000);
                return () => clearInterval(interval);
            }, [mealPlan, mealsCompleted, days]);

            const showNotification = (title, body) => {
                if ('Notification' in window && Notification.permission === 'granted') {
                    new Notification(title, { body });
                }
            };

            const requestNotificationPermission = () => {
                if ('Notification' in window && Notification.permission === 'default') {
                    Notification.requestPermission();
                }
            };

            useEffect(() => {
                requestNotificationPermission();
            }, []);

            const addWater = (amount) => {
                setWaterIntake(prev => Math.min(prev + amount, waterGoal));
                setLastWaterTime(new Date());
            };

            const resetWater = () => {
                setWaterIntake(0);
                setLastWaterTime(null);
            };

            const addMealToPlan = () => {
                if (newMeal.meal.trim()) {
                    setMealPlan(prev => ({
                        ...prev,
                        [`${newMeal.day}-${newMeal.time}`]: newMeal.meal
                    }));
                    setNewMeal({ day: 'Montag', time: 'Fr√ºhst√ºck', meal: '' });
                    setShowMealForm(false);
                }
            };

            const completeMeal = (day, time) => {
                const today = new Date().toDateString();
                const key = `${today}-${time}`;
                setMealsCompleted(prev => ({
                    ...prev,
                    [key]: !prev[key]
                }));
            };

            const generateShoppingList = () => {
                const items = new Set();
                Object.values(mealPlan).forEach(meal => {
                    if (meal) items.add(meal);
                });
                return Array.from(items);
            };

            const waterPercentage = (waterIntake / waterGoal) * 100;
            const today = days[new Date().getDay() === 0 ? 6 : new Date().getDay() - 1];

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-50 to-green-50 p-4">
                    <div className="max-w-4xl mx-auto">
                        <h1 className="text-3xl font-bold text-gray-800 mb-6 flex items-center gap-2">
                            <Droplet className="text-blue-500" />
                            Gesundheits-Tracker
                        </h1>

                        <div className="flex gap-2 mb-6 overflow-x-auto">
                            <button
                                onClick={() => setActiveTab('water')}
                                className={`px-4 py-2 rounded-lg flex items-center gap-2 whitespace-nowrap ${
                                    activeTab === 'water' ? 'bg-blue-500 text-white' : 'bg-white text-gray-700'
                                }`}
                            >
                                <Droplet size={18} />
                                Wasser
                            </button>
                            <button
                                onClick={() => setActiveTab('meals')}
                                className={`px-4 py-2 rounded-lg flex items-center gap-2 whitespace-nowrap ${
                                    activeTab === 'meals' ? 'bg-green-500 text-white' : 'bg-white text-gray-700'
                                }`}
                            >
                                <Coffee size={18} />
                                Mahlzeiten
                            </button>
                            <button
                                onClick={() => setActiveTab('plan')}
                                className={`px-4 py-2 rounded-lg flex items-center gap-2 whitespace-nowrap ${
                                    activeTab === 'plan' ? 'bg-purple-500 text-white' : 'bg-white text-gray-700'
                                }`}
                            >
                                <Calendar size={18} />
                                Wochenplan
                            </button>
                            <button
                                onClick={() => setActiveTab('shopping')}
                                className={`px-4 py-2 rounded-lg flex items-center gap-2 whitespace-nowrap ${
                                    activeTab === 'shopping' ? 'bg-orange-500 text-white' : 'bg-white text-gray-700'
                                }`}
                            >
                                <ShoppingCart size={18} />
                                Einkaufsliste
                            </button>
                        </div>

                        {activeTab === 'water' && (
                            <div className="bg-white rounded-xl shadow-lg p-6">
                                <h2 className="text-2xl font-semibold mb-4">Wasseraufnahme Heute</h2>
                                <div className="mb-6">
                                    <div className="flex justify-between mb-2">
                                        <span className="text-gray-600">{waterIntake}ml / {waterGoal}ml</span>
                                        <span className="text-gray-600">{Math.round(waterPercentage)}%</span>
                                    </div>
                                    <div className="w-full bg-gray-200 rounded-full h-6 overflow-hidden">
                                        <div
                                            className="bg-gradient-to-r from-blue-400 to-blue-600 h-full transition-all duration-500 flex items-center justify-center"
                                            style={{ width: `${Math.min(waterPercentage, 100)}%` }}
                                        >
                                            {waterPercentage > 10 && (
                                                <span className="text-white text-sm font-semibold">
                                                    {Math.round(waterPercentage)}%
                                                </span>
                                            )}
                                        </div>
                                    </div>
                                </div>

                                {waterIntake >= waterGoal && (
                                    <div className="bg-green-100 border border-green-300 rounded-lg p-4 mb-4">
                                        <p className="text-green-800 font-semibold flex items-center gap-2">
                                            <Check size={20} />
                                            Super! Du hast dein Tagesziel erreicht! üéâ
                                        </p>
                                    </div>
                                )}

                                <div className="grid grid-cols-3 gap-3 mb-4">
                                    <button
                                        onClick={() => addWater(250)}
                                        className="bg-blue-500 text-white py-3 rounded-lg hover:bg-blue-600 transition"
                                    >
                                        + 250ml
                                        <div className="text-xs opacity-80">Glas</div>
                                    </button>
                                    <button
                                        onClick={() => addWater(500)}
                                        className="bg-blue-500 text-white py-3 rounded-lg hover:bg-blue-600 transition"
                                    >
                                        + 500ml
                                        <div className="text-xs opacity-80">Flasche</div>
                                    </button>
                                    <button
                                        onClick={() => addWater(750)}
                                        className="bg-blue-500 text-white py-3 rounded-lg hover:bg-blue-600 transition"
                                    >
                                        + 750ml
                                        <div className="text-xs opacity-80">Gro√üe Flasche</div>
                                    </button>
                                </div>

                                <button
                                    onClick={resetWater}
                                    className="w-full bg-gray-500 text-white py-2 rounded-lg hover:bg-gray-600 transition"
                                >
                                    Zur√ºcksetzen f√ºr neuen Tag
                                </button>

                                {lastWaterTime && (
                                    <p className="text-gray-500 text-sm mt-4 flex items-center gap-2">
                                        <Clock size={16} />
                                        Letztes Getr√§nk: {lastWaterTime.toLocaleTimeString('de-DE')}
                                    </p>
                                )}
                            </div>
                        )}

                        {activeTab === 'meals' && (
                            <div className="bg-white rounded-xl shadow-lg p-6">
                                <h2 className="text-2xl font-semibold mb-4">Heutige Mahlzeiten ({today})</h2>
                                <div className="space-y-3">
                                    {mealTimes.map(time => {
                                        const mealKey = `${today}-${time}`;
                                        const plannedMeal = mealPlan[mealKey];
                                        const isCompleted = mealsCompleted[`${new Date().toDateString()}-${time}`];

                                        return (
                                            <div
                                                key={time}
                                                className={`border rounded-lg p-4 flex items-center justify-between ${
                                                    isCompleted ? 'bg-green-50 border-green-300' : 'border-gray-200'
                                                }`}
                                            >
                                                <div className="flex-1">
                                                    <h3 className="font-semibold text-gray-800">{time}</h3>
                                                    <p className="text-gray-600 text-sm">
                                                        {plannedMeal || 'Keine Mahlzeit geplant'}
                                                    </p>
                                                </div>
                                                <button
                                                    onClick={() => completeMeal(today, time)}
                                                    className={`p-2 rounded-lg transition ${
                                                        isCompleted
                                                            ? 'bg-green-500 text-white'
                                                            : 'bg-gray-200 text-gray-600 hover:bg-gray-300'
                                                    }`}
                                                >
                                                    <Check size={20} />
                                                </button>
                                            </div>
                                        );
                                    })}
                                </div>
                            </div>
                        )}

                        {activeTab === 'plan' && (
                            <div className="bg-white rounded-xl shadow-lg p-6">
                                <div className="flex justify-between items-center mb-4">
                                    <h2 className="text-2xl font-semibold">Wochenplan</h2>
                                    <button
                                        onClick={() => setShowMealForm(!showMealForm)}
                                        className="bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600 transition flex items-center gap-2"
                                    >
                                        <Plus size={20} />
                                        Mahlzeit hinzuf√ºgen
                                    </button>
                                </div>

                                {showMealForm && (
                                    <div className="bg-purple-50 border border-purple-200 rounded-lg p-4 mb-4">
                                        <div className="grid grid-cols-1 md:grid-cols-3 gap-3 mb-3">
                                            <select
                                                value={newMeal.day}
                                                onChange={(e) => setNewMeal({ ...newMeal, day: e.target.value })}
                                                className="border rounded-lg px-3 py-2"
                                            >
                                                {days.map(day => (
                                                    <option key={day} value={day}>{day}</option>
                                                ))}
                                            </select>
                                            <select
                                                value={newMeal.time}
                                                onChange={(e) => setNewMeal({ ...newMeal, time: e.target.value })}
                                                className="border rounded-lg px-3 py-2"
                                            >
                                                {mealTimes.map(time => (
                                                    <option key={time} value={time}>{time}</option>
                                                ))}
                                            </select>
                                            <input
                                                type="text"
                                                placeholder="Mahlzeit beschreiben"
                                                value={newMeal.meal}
                                                onChange={(e) => setNewMeal({ ...newMeal, meal: e.target.value })}
                                                className="border rounded-lg px-3 py-2"
                                            />
                                        </div>
                                        <div className="flex gap-2">
                                            <button
                                                onClick={addMealToPlan}
                                                className="bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600 transition flex items-center gap-2"
                                            >
                                                <Check size={18} />
                                                Hinzuf√ºgen
                                            </button>
                                            <button
                                                onClick={() => setShowMealForm(false)}
                                                className="bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition flex items-center gap-2"
                                            >
                                                <X size={18} />
                                                Abbrechen
                                            </button>
                                        </div>
                                    </div>
                                )}

                                <div className="overflow-x-auto">
                                    <table className="w-full">
                                        <thead>
                                            <tr className="border-b">
                                                <th className="text-left p-2">Tag</th>
                                                {mealTimes.map(time => (
                                                    <th key={time} className="text-left p-2">{time}</th>
                                                ))}
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {days.map(day => (
                                                <tr key={day} className={`border-b ${day === today ? 'bg-blue-50' : ''}`}>
                                                    <td className="p-2 font-semibold">{day}</td>
                                                    {mealTimes.map(time => (
                                                        <td key={time} className="p-2">
                                                            <div className="text-sm text-gray-600">
                                                                {mealPlan[`${day}-${time}`] || '-'}
                                                            </div>
                                                        </td>
                                                    ))}
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        )}

                        {activeTab === 'shopping' && (
                            <div className="bg-white rounded-xl shadow-lg p-6">
                                <h2 className="text-2xl font-semibold mb-4">W√∂chentliche Einkaufsliste</h2>
                                <p className="text-gray-600 mb-4">Basierend auf deinem Wochenplan</p>
                                <div className="space-y-2">
                                    {generateShoppingList().length > 0 ? (
                                        generateShoppingList().map((item, index) => (
                                            <div
                                                key={index}
                                                className="border border-gray-200 rounded-lg p-3 flex items-center gap-3"
                                            >
                                                <div className="w-6 h-6 border-2 border-gray-300 rounded"></div>
                                                <span className="text-gray-800">{item}</span>
                                            </div>
                                        ))
                                    ) : (
                                        <p className="text-gray-500 text-center py-8">
                                            F√ºge Mahlzeiten zu deinem Wochenplan hinzu, um eine Einkaufsliste zu erstellen
                                        </p>
                                    )}
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        ReactDOM.render(<HealthTracker />, document.getElementById('root'));
    </script>
</body>
</html>